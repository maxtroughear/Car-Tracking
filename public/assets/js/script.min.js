$(document).ready(function(){$("[data-bs-hover-animate]").mouseenter(function(){var e=$(this);e.addClass("animated "+e.attr("data-bs-hover-animate"))}).mouseleave(function(){var e=$(this);e.removeClass("animated "+e.attr("data-bs-hover-animate"))})}),function(e){var t="a. b. c. d.".split(" "),a=function(e,a,n,o){return{url:["https://stamen-tiles-{S}a.ssl.fastly.net/",e,"/{Z}/{X}/{Y}.",a].join(""),type:a,subdomains:t.slice(),minZoom:n,maxZoom:o,attribution:['Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ','under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ','Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, ','under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'].join("")}},n={toner:a("toner","png",0,20),terrain:a("terrain","png",0,18),"terrain-classic":a("terrain-classic","png",0,18),watercolor:a("watercolor","jpg",1,18),"trees-cabs-crime":{url:"http://{S}.tiles.mapbox.com/v3/stamen.trees-cabs-crime/{Z}/{X}/{Y}.png",type:"png",subdomains:"a b c d".split(" "),minZoom:11,maxZoom:18,extent:[{lat:37.853,lon:-122.577},{lat:37.684,lon:-122.313}],attribution:['Design by Shawn Allen at <a href="http://stamen.com/">Stamen</a>.','Data courtesy of <a href="http://fuf.net/">FuF</a>,','<a href="http://www.yellowcabsf.com/">Yellow Cab</a>','&amp; <a href="http://sf-police.org/">SFPD</a>.'].join(" ")}};n["terrain-classic"].url="https://stamen-tiles-{S}a.ssl.fastly.net/terrain/{Z}/{X}/{Y}.png",p("toner",["hybrid","labels","lines","background","lite"]),p("terrain",["background","labels","lines"]),m("toner",["2010"]),m("toner",["2011","2011-lines","2011-labels","2011-lite"]);for(var o,r,i=["toner","toner-hybrid","toner-labels","toner-lines","toner-background","toner-lite","terrain","terrain-background","terrain-lines","terrain-labels","terrain-classic"],l=0;l<i.length;l++){var s=i[l];n[s].retina=!0,n[s].attribution=['Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ','under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ','Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ','under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'].join("")}function m(e,t){for(var o=c(e),r=0;r<t.length;r++){var i=[e,t[r]].join("-");n[i]=a(i,o.type,o.minZoom,o.maxZoom),n[i].deprecated=!0}}function p(e,t,o){for(var r=c(e),i=0;i<t.length;i++){var l=[e,t[i]].join("-");n[l]=a(l,o||r.type,r.minZoom,r.maxZoom)}}function c(e){if(e in n){var t=n[e];return t.deprecated&&console&&console.warn&&console.warn(e+" is a deprecated style; it will be redirected to its replacement. For performance improvements, please change your reference."),t}throw"No such provider ("+e+")"}if(e.stamen=e.stamen||{},e.stamen.tile=e.stamen.tile||{},e.stamen.tile.providers=n,e.stamen.tile.getProvider=c,"object"==typeof MM){var d="function"==typeof MM.Template?MM.Template:MM.TemplatedMapProvider;MM.StamenTileLayer=function(e){var t=c(e);this._provider=t,MM.Layer.call(this,new d(t.url,t.subdomains)),this.provider.setZoomRange(t.minZoom,t.maxZoom),this.attribution=t.attribution},MM.StamenTileLayer.prototype={setCoordLimits:function(e){var t=this._provider;return!!t.extent&&(e.coordLimits=[e.locationCoordinate(t.extent[0]).zoomTo(t.minZoom),e.locationCoordinate(t.extent[1]).zoomTo(t.maxZoom)],!0)}},MM.extend(MM.StamenTileLayer,MM.Layer)}if("object"==typeof L&&(L.StamenTileLayer=L.TileLayer.extend({initialize:function(e,t){var a=c(e),n=a.url.replace(/({[A-Z]})/g,function(e){return e.toLowerCase()}),o=L.Util.extend({},t,{minZoom:a.minZoom,maxZoom:a.maxZoom,subdomains:a.subdomains,scheme:"xyz",attribution:a.attribution,sa_id:e});L.TileLayer.prototype.initialize.call(this,n,o)}}),L.stamenTileLayer=function(e,t){return new L.StamenTileLayer(e,t)}),"object"==typeof OpenLayers){function u(e){return e.replace(/({.})/g,function(e){return"$"+e.toLowerCase()})}OpenLayers.Layer.Stamen=OpenLayers.Class(OpenLayers.Layer.OSM,{initialize:function(e,t){var a=c(e),n=a.url,o=a.subdomains,r=[];if(n.indexOf("{S}")>-1)for(var i=0;i<o.length;i++)r.push(u(n.replace("{S}",o[i])));else r.push(u(n));return t=OpenLayers.Util.extend({numZoomLevels:a.maxZoom,buffer:0,transitionEffect:"resize",tileOptions:{crossOriginKeyword:null},attribution:a.attribution},t),OpenLayers.Layer.OSM.prototype.initialize.call(this,e,r,t)}})}"object"==typeof google&&"object"==typeof google.maps&&(google.maps.ImageMapType=(o=google.maps.ImageMapType,(r=function(){arguments.length&&o.apply(this,arguments)}).prototype=o.prototype,r),google.maps.StamenMapType=function(e){var t=c(e),a=t.subdomains;return google.maps.ImageMapType.call(this,{getTileUrl:function(e,n){var o=1<<n,r=e.x%o,i=r<0?r+o:r,l=e.y,s=(n+i+l)%a.length;return t.url.replace("{S}",a[s]).replace("{Z}",n).replace("{X}",i).replace("{Y}",l)},tileSize:new google.maps.Size(256,256),name:e,minZoom:t.minZoom,maxZoom:t.maxZoom})},google.maps.StamenMapType.prototype=new google.maps.ImageMapType)}("undefined"==typeof exports?this:exports);var layer=null,map=null;if("undefined"!=typeof L){layer=new L.StamenTileLayer("toner");(map=new L.Map("map",{center:new L.LatLng(-40.9006,174.886),zoom:5})).addLayer(layer)}$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")});const refreshTimeoutms=5e3,carUpdater=new function(){this.carID=null,this.active=!1,this.marker=null,this.init=(e=>{this.carID=e,this.run(),"undefined"!=typeof L&&(this.marker=L.marker([0,0]))}),this.run=(()=>{$.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/console/getlocation?carID="+this.carID,xhrFields:{withCredentials:!0}}).done(e=>{if("OK"==e.status){let t=e.locations;if(null!=t){let e={lat:t[t.length-1].lat,lng:t[t.length-1].lon};this.marker.setLatLng(e),this.active||(this.active=!0,this.marker.addTo(map),map.flyTo(e,14))}}else console.log(e.status)}).always(()=>{setTimeout(this.run,5e3)})})},deleteUrl="/console/admin/deleteaccount?id=",deleteCarUrl="/console/admin/deletecar?id=";$("#editUserModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("id"),n=$(this);n.find("#account-username").val(t.data("username")),n.find("#account-name").val(t.data("name")),n.find("#account-deleteButton").attr("href",deleteUrl+a)}),$("#editCarModal").on("show.bs.modal",function(e){var t=$(e.relatedTarget),a=t.data("id"),n=$(this);n.find("#car-name").val(t.data("name")),n.find("#car-username").val(t.data("username")),n.find("#car-id").val(t.data("id")),n.find("#car-apikey").val(t.data("apikey")),n.find("#car-deleteButton").attr("href",deleteCarUrl+a)});